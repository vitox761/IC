<!DOCTYPE html>
<html>
<head>
<audio id = "beep01">
  <source src="sound/beep01.mp3" type="audio/mpeg">
</audio>
<audio id = "beep02">
  <source src="sound/beep02.mp3" type="audio/mpeg">
</audio>
<audio id = "beep03">
  <source src="sound/beep03.mp3" type="audio/mpeg">
</audio>
<script type="text/javascript" src="quill/quill.js"></script>
<script>

function inicio(){
  // Criando editor rich text e vetor de cores
  editor = new Quill('#editor');
  cores = ['rgb(0,0,0)','rgb(0,0,255)','rgb(0,150,0)','rgb(255,0,0)'];
  coresCont = 0;

  // Vetor para salvar combinacao
  combination = ["",""];
  indice = 0;

  // Carrengando beeps

  // Definindo tamanho do canvas
  var canvas = document.getElementById('myCanvas');
  canvas.width = window.screen.width;
  canvas.height= window.screen.height;

  // Definindo proporção e tamanho de fonte inicial
  var font_inicial = 30;
  var font_side = font_inicial/1.4142;
  var ratio_width = canvas.width/font_side;
  var ratio_height = canvas.height/font_side;
  var ratio = Math.sqrt((ratio_width*ratio_width) + (ratio_height*ratio_height));
  ratio = ratio/69.23;
  size_font_big = font_inicial*ratio;
  var screen_ratio = ((canvas.width/canvas.height)*0.5)/1.778;
  size_font_small = size_font_big*screen_ratio;

  // Desenhando teclado inicial
  canvasDraw();
}

function canvasDraw()
{
  c = document.getElementById("myCanvas");
  ctx = c.getContext("2d");

  ctx.beginPath();
  ctx.moveTo(c.width*0.4,c.height*0.4);
  ctx.lineTo(size_font_big*2,size_font_big*2);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(c.width*0.4,c.height*0.4);
  ctx.lineTo(size_font_big*2,size_font_big*2);
  ctx.stroke();//< /\

  ctx.beginPath();
  ctx.moveTo(c.width*0.4,c.height*0.5);
  ctx.lineTo(size_font_big*2,c.height*0.5);
  ctx.stroke();//<

  ctx.beginPath();
  ctx.moveTo(c.width*0.4,c.height*0.6);
  ctx.lineTo(size_font_big*2,c.height-size_font_big*2);
  ctx.stroke();//< \/

  ctx.beginPath();
  ctx.moveTo(c.width*0.5,c.height*0.6);
  ctx.lineTo(c.width*0.5,c.height-size_font_big*2);
  ctx.stroke();//\/

  ctx.beginPath();
  ctx.moveTo(c.width*0.6,c.height*0.6);
  ctx.lineTo(c.width-size_font_big*2,c.height-size_font_big*2);
  ctx.stroke();//> \/

  ctx.beginPath();
  ctx.moveTo(c.width*0.6,c.height*0.5);
  ctx.lineTo(c.width-size_font_big*2,c.height*0.5);
  ctx.stroke();//>

  ctx.beginPath();
  ctx.moveTo(c.width*0.6,c.height*0.4);
  ctx.lineTo(c.width-size_font_big*2,size_font_big*2);
  ctx.stroke();//> /\

  ctx.beginPath();
  ctx.moveTo(c.width*0.5,c.height*0.4);
  ctx.lineTo(c.width*0.5,size_font_big*2);
  ctx.stroke();// /\


  ctx.font = size_font_big+"px Arial";
  // CE
  ctx.fillText("A B",c.width*0.01,size_font_big);
  ctx.fillText("C",c.width*0.01,size_font_big*2);
  // E
  ctx.fillText("D",c.width*0.01,c.height*0.475);
  ctx.fillText("E",c.width*0.01,c.height*0.475+size_font_big);
  ctx.fillText("F",c.width*0.01,c.height*0.475+size_font_big*2);
  // BE
  ctx.fillText("G",c.width*0.01,c.height*0.95);
  ctx.fillText("H J",c.width*0.01,c.height*0.95+size_font_big);
  // CD
  ctx.fillText("L M",c.width*0.95,size_font_big);
  ctx.fillText("N",c.width*0.95+size_font_big,size_font_big*2);
  // D
  ctx.fillText("O",c.width*0.95+size_font_big,c.height*0.475);
  ctx.fillText("P",c.width*0.95+size_font_big,c.height*0.475+size_font_big);
  ctx.fillText("Q",c.width*0.95+size_font_big,c.height*0.475+size_font_big*2);
  // BD
  ctx.fillText("R",c.width*0.95+size_font_big,c.height*0.95);
  ctx.fillText(" S T",c.width*0.95,c.height*0.95+size_font_big);
  // C
  ctx.fillText("U V X",c.width*0.50-size_font_big*1.3,size_font_big);
  // B
  ctx.fillText("APAGAR ESPACO PONTO",c.width*0.50-size_font_big*6.3,c.height*0.95+size_font_big);

}

function Coordenadas(objeto) {
    x = objeto.clientX;
    y = objeto.clientY;


    var width = window.screen.width;
    var height = window.screen.height;
    var width_part = (width / 4);
    var height_part = (height / 3);
    var pos = "N";
    var comb = "";
    var aux = 0;


    if(x == 0) {
        if(y <= height_part ) {
          pos = "CE"
        } else if(y >= (height_part * 2)) {
          pos = "BE"
        } else {
          pos = "E"
        }
    }

    if(x == (width-1) ){
        if(y <= height_part ) {
          pos = "CD"
        } else if(y >= (height_part * 2)) {
          pos = "BD"
        } else {
          pos = "D"
        }
    }


    if(y == 0) {
       if(x <= width_part) {
          pos = "CE"
       } else if(x >= (width_part * 3)) {
          pos = "CD"
       } else {
          pos = "C"
       }
    }


    if(y >= (height-5)) {
      if(x <= width_part) {
          pos = "BE"
      } else if(x >= (width_part * 3)) {
          pos = "BD"
      } else {
          pos = "B"
      }
    }


    if(pos != "N"){
       if(indice == 0){
          combination[indice] = pos;
          indice++;
          document.getElementById('beep01').play();
       }
       else if(combination[(indice - 1)] != pos){
          combination[indice] = pos;
          indice++;
          document.getElementById('beep02').play();
       }
    }
//    coor = "Coordenadas: (" + x + "," + y + ")" + pos;
//    document.getElementById("coord").innerHTML = coor
    if(x >= (width*0.4)) {
       if(x <= (width*0.6)) {
           if(y <= height*0.6){
                if(y >= height*0.4)
                {
                    while(indice > aux)
                {
              comb = comb + combination[aux];
              aux++
              }
              Letra(comb);
              indice = 0;
              pos = "N";
              // Teclados(pos);
                }
           }
       }
    }

}

function Letra(pos)
{
    var length = editor.getLength();
    if(pos != "")
      document.getElementById('beep03').play()
    if(pos == "CE")
       editor.insertText(length-1, 'a',{'color': cores[coresCont],'size':'30px'});
    if(pos == "CEC")
       editor.insertText(length-1, 'b',{'color': cores[coresCont],'size':'30px'});
    if(pos == "CEE")
       editor.insertText(length-1, 'c',{'color': cores[coresCont],'size':'30px'});
    if(pos == "ECE")
       editor.insertText(length-1, 'd',{'color': cores[coresCont],'size':'30px'});
    if(pos == "E")
       editor.insertText(length-1, 'e',{'color': cores[coresCont],'size':'30px'});
    if(pos == "EBE")
       editor.insertText(length-1, 'f',{'color': cores[coresCont],'size':'30px'});
    if(pos == "BEE")
       editor.insertText(length-1, 'g',{'color': cores[coresCont],'size':'30px'});
    if(pos == "BE")
       editor.insertText(length-1, 'h',{'color': cores[coresCont],'size':'30px'});
    if(pos == "BEB")
       editor.insertText(length-1, 'j',{'color': cores[coresCont],'size':'30px'});
    if(pos == "CDC")
       editor.insertText(length-1, 'l',{'color': cores[coresCont],'size':'30px'});
    if(pos == "CD")
       editor.insertText(length-1, 'm',{'color': cores[coresCont],'size':'30px'});
    if(pos == "CDD")
       editor.insertText(length-1, 'n',{'color': cores[coresCont],'size':'30px'});
    if(pos == "DCD")
       editor.insertText(length-1, 'o',{'color': cores[coresCont],'size':'30px'});
    if(pos == "D")
       editor.insertText(length-1, 'p',{'color': cores[coresCont],'size':'30px'});
    if(pos == "DBD")
       editor.insertText(length-1, 'q',{'color': cores[coresCont],'size':'30px'});
    if(pos == "BDD")
       editor.insertText(length-1, 'r',{'color': cores[coresCont],'size':'30px'});
    if(pos == "BDB")
       editor.insertText(length-1, 's',{'color': cores[coresCont],'size':'30px'});
    if(pos == "BD")
       editor.insertText(length-1, 't',{'color': cores[coresCont],'size':'30px'});
    if(pos == "CCE")
       editor.insertText(length-1, 'u',{'color': cores[coresCont],'size':'30px'});
    if(pos == "C")
       editor.insertText(length-1, 'v',{'color': cores[coresCont],'size':'30px'});
    if(pos == "CCD")
       editor.insertText(length-1, 'x',{'color': cores[coresCont],'size':'30px'});
    if(pos == "B")
       editor.insertText(length-1,' ',{'color': cores[coresCont],'size':'30px'});
    if(pos == "BBE")
    {
       var lastChar = editor.getText(length-2,length-1);
       if(lastChar == '.')
       	   if(coresCont == 0)
               coresCont = 3;
           else
               coresCont--;
       editor.deleteText(length-2,length);
    }
    if(pos == "BBD")
    {
       editor.insertText(length-1,'.',{'color': cores[coresCont],'size':'30px'});
       if(coresCont == 3)
	  coresCont = 0;
       else
	  coresCont++;
    }
    objeto = document.getElementById('editor');
    objeto.scrollTop = objeto.scrollHeight;
}

</script>
</head>
<body  style="margin:0px" onLoad="inicio()">
<style>
body {position:fixed;width:100%; height:100%; overflow:hidden, margin:0}
html {width:100%; height:100%; overflow:hidden}

#canvas {
    background-color: blue;
    display: block;
}

m1 {
    position: absolute;
    left: 39%;
    top: 38%;
    font-size:20px;
    white-space:pre;
    z-index:-1;
}
</style>

<div id="coordiv" style="width:100%;height:100%;border:1px solid;z-index:1" onmousemove="Coordenadas(event)">
<canvas id="myCanvas" style="border:1px"></canvas>
<div id="editor" style="position: absolute; left:40%;top:40%; width:20%; height: 20%;border:2px solid"></div>
</div>
<m1 id="coord"></m1>

</body>


</html>
